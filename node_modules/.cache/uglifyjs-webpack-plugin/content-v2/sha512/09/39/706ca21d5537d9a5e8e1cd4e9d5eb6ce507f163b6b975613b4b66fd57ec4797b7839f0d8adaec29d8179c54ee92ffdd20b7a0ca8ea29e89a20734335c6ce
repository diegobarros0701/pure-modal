{"code":"!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){o(3),e.exports=o(1)},function(e,t,o){},,function(e,t,o){\"use strict\";function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}o.r(t);new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={method:\"GET\",url:null,async:!0,data:\"\",responseType:\"text\",headers:[],onError:function(e,t){},onSuccess:function(e,t){},onComplete:function(e,t){},beforeSend:function(e){}}}return function(e,t,o){t&&n(e.prototype,t),o&&n(e,o)}(e,[{key:\"_setRequestHeaders\",value:function(e){this.options.headers.forEach(function(t){return e.setRequestHeader(t.name,t.value)})}},{key:\"request\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(t._overrideOptionsProperties(e),t._isOptionsValid()){var o=new XMLHttpRequest;o.open(t.options.method,t.options.url,t.options.async),o.onreadystatechange=function(){var e=this.status.toString();if(4==this.readyState){var n=this.response;e.startsWith(\"2\")?(\"json\"===t.options.responseType&&(n=JSON.parse(n)),t.options.onSuccess(n,this)):(e.startsWith(\"4\")||e.startsWith(\"5\"))&&(console.error(e,\" - \",this.statusText),t.options.onError(n,this)),t.options.onComplete(n,this),console.log(o.getAllResponseHeaders())}},\"POST\"===t.options.method&&\"string\"==typeof t.options.data&&o.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),this._setRequestHeaders(o),this.options.beforeSend(o),o.send(t.options.data)}else console.error(\"ERROR - Specify the options correctly\")}},{key:\"_overrideOptionsProperties\",value:function(e){for(var t in e)this.options.hasOwnProperty(t)&&(this.options[t]=e[t])}},{key:\"_isOptionsValid\",value:function(){return\"string\"==typeof this.options.url&&null!=this.options.url&&\"\"!==this.options.url.trim()}}]),e}());function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={form_selector:\"form[data-file-choose-form]\",file_drop_selector:\".pure-file-drop\",file_drop_area_text:\"Arraste os arquivos ou clique aqui\",upload_url:null,async_request:!0,param_name:\"file\",form_ajax:!0,upload_on_drop:!1,select_by_click:!0,onSuccess:function(e){},onError:function(e){},onEnd:function(e){}},this._files_selected=[],this._overrideOptionsProperties(t),this._build()}return function(e,t,o){t&&r(e.prototype,t),o&&r(e,o)}(e,[{key:\"_build\",value:function(){this._form=document.querySelector(this.options.form_selector);var e=document.createElement(\"span\");e.innerText=this.options.file_drop_area_text,this._files_drop_area=document.querySelector(this.options.file_drop_selector),this._drop_zone_area=document.createElement(\"div\"),this._drop_zone_area.className=\"drop-zone\",this._drop_zone_area.appendChild(e),this.options.select_by_click&&(this._file_input=document.createElement(\"input\"),this._file_input.setAttribute(\"type\",\"file\"),this._file_input.setAttribute(\"multiple\",!0),this._drop_zone_area.appendChild(this._file_input)),this._files_drop_area.appendChild(this._drop_zone_area),this._form&&(this._form.enctype=\"multipart/form-data\",this.options.upload_url&&(this._form.action=this.options.upload_url),this._initializeEvents())}},{key:\"_overrideOptionsProperties\",value:function(e){for(var t in e)this.options.hasOwnProperty(t)&&(this.options[t]=e[t])}},{key:\"_initializeEvents\",value:function(){var e=this;if(this._form.addEventListener(\"submit\",function(t){return e._doRequest(t)}),this._files_drop_area.addEventListener(\"dragenter\",function(t){e._drop_zone_area.className+=\" dragging\"}),this._files_drop_area.addEventListener(\"dragover\",function(e){return e.preventDefault()}),this._files_drop_area.addEventListener(\"drop\",function(t){t.preventDefault(),e._handleFiles(t.dataTransfer.files,t)}),this._files_drop_area.addEventListener(\"dragleave\",function(t){e._drop_zone_area.className=e._drop_zone_area.className.replace(/\\s*.(dragging)/g,\"\")}),this._files_drop_area.addEventListener(\"click\",function(t){t.target.dataset.removeFileDrop&&e._removeFile(t)}),this.options.select_by_click){var t=this;this._files_drop_area.addEventListener(\"click\",function(e){e.target===t._drop_zone_area&&t._file_input.click()}),this._file_input.addEventListener(\"change\",function(t){e._handleFiles(t.target.files,t),t.target.value=\"\"})}}},{key:\"_removeFile\",value:function(e){var t=this._index(e.target.parentNode);this._files_selected.splice(t,1),this._files_dropped_area.removeChild(e.target.parentNode),0==this._files_dropped_area.children.length&&(this._files_drop_area.removeChild(this._files_dropped_area),this._files_dropped_area=null)}},{key:\"_index\",value:function(e){for(var t=0;e;)e=e.previousSibling,t++;return--t}},{key:\"_handleFiles\",value:function(e,t){t.preventDefault();for(var o=0;o<e.length;o++){var n=e[o],r=document.createElement(\"span\");r.innerText=n.name;var i=document.createElement(\"button\");i.setAttribute(\"type\",\"button\"),i.className=\"btn btn-danger\",i.innerText=\"Remover\",i.dataset.removeFileDrop=\"remove-file-drop\";var s=document.createElement(\"div\");s.className=\"single-file\",s.appendChild(r),s.appendChild(i),this._files_dropped_area||(this._files_dropped_area=document.createElement(\"div\"),this._files_dropped_area.className=\"files-dropped\",this._files_drop_area.appendChild(this._files_dropped_area)),this._files_dropped_area.appendChild(s),this._files_selected.push(n)}}},{key:\"_doRequest\",value:function(e){console.log(\"Requesting...\"),e.preventDefault();var t=this._getFormData();$.ajax({url:this.options.upload_url,type:\"POST\",async:this.options.async_request,processData:!1,contentType:!1,data:t,error:function(e){this.options.onError(e)},complete:function(e){this.options.onEnd(e)}}).done(function(e){this.options.onSuccess(e)})}},{key:\"_getFormData\",value:function(){var e=this,t=new FormData(e._form);return e._files_selected.forEach(function(o){t.append(e.options.param_name,o)}),t}},{key:\"request\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(t._overrideOptionsProperties(e),t._isOptionsValid()){var o=new XMLHttpRequest;o.open(t.options.method,t.options.url,t.options.async),o.onreadystatechange=function(){var e=this.status.toString();if(4==this.readyState){var n=this.response;e.startsWith(\"2\")?(\"json\"===t.options.responseType&&(n=JSON.parse(n)),t.options.onSuccess(n,this)):(e.startsWith(\"4\")||e.startsWith(\"5\"))&&(console.error(e,\" - \",this.statusText),t.options.onError(n,this)),t.options.onComplete(n,this),console.log(o.getAllResponseHeaders())}},\"POST\"===t.options.method&&\"string\"==typeof t.options.data&&o.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),this._setRequestHeaders(o),this.options.beforeSend(o),o.send(t.options.data)}else console.error(\"ERROR - Specify the options correctly\")}}]),e}())({form_selector:\"#myForm\",upload_url:\"http://localhost:3000/servicos\"})}]);","extractedComments":[]}