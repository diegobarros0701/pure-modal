{"code":"!function(e){var t={};function o(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){o(2),e.exports=o(1)},function(e,t){throw new Error(\"Module build failed (from ./node_modules/extract-loader/lib/extractLoader.js):\\nNonErrorEmittedError: (Emitted value instead of an instance of Error) TypeError: require(...) is not a function\\n    at runLoaders (/home/diegobarros/projetos/pure-file-drop/node_modules/webpack/lib/NormalModule.js:283:13)\\n    at /home/diegobarros/projetos/pure-file-drop/node_modules/loader-runner/lib/LoaderRunner.js:364:11\\n    at /home/diegobarros/projetos/pure-file-drop/node_modules/loader-runner/lib/LoaderRunner.js:230:18\\n    at context.callback (/home/diegobarros/projetos/pure-file-drop/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\\n    at Object.<anonymous> (/home/diegobarros/projetos/pure-file-drop/node_modules/extract-loader/lib/extractLoader.js:39:13)\\n    at Generator.throw (<anonymous>)\\n    at step (/home/diegobarros/projetos/pure-file-drop/node_modules/babel-runtime/helpers/asyncToGenerator.js:17:30)\\n    at /home/diegobarros/projetos/pure-file-drop/node_modules/babel-runtime/helpers/asyncToGenerator.js:30:13\\n    at <anonymous>\\n    at runMicrotasksCallback (internal/process/next_tick.js:121:5)\\n    at _combinedTickCallback (internal/process/next_tick.js:131:7)\\n    at process._tickCallback (internal/process/next_tick.js:180:9)\")},function(e,t,o){\"use strict\";o.r(t);new class{constructor(){this.options={method:\"GET\",url:null,async:!0,data:\"\",responseType:\"text\",headers:[],onError:function(e,t){},onSuccess:function(e,t){},onComplete:function(e,t){},beforeSend:function(e){}}}_setRequestHeaders(e){this.options.headers.forEach(t=>e.setRequestHeader(t.name,t.value))}request(e={}){var t=this;if(t._overrideOptionsProperties(e),t._isOptionsValid()){let e=new XMLHttpRequest;e.open(t.options.method,t.options.url,t.options.async),e.onreadystatechange=function(){let o=this.status.toString();if(4==this.readyState){let r=this.response;o.startsWith(\"2\")?(\"json\"===t.options.responseType&&(r=JSON.parse(r)),t.options.onSuccess(r,this)):(o.startsWith(\"4\")||o.startsWith(\"5\"))&&(console.error(o,\" - \",this.statusText),t.options.onError(r,this)),t.options.onComplete(r,this),console.log(e.getAllResponseHeaders())}},\"POST\"===t.options.method&&\"string\"==typeof t.options.data&&e.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),this._setRequestHeaders(e),this.options.beforeSend(e),e.send(t.options.data)}else console.error(\"ERROR - Specify the options correctly\")}_overrideOptionsProperties(e){for(var t in e)this.options.hasOwnProperty(t)&&(this.options[t]=e[t])}_isOptionsValid(){return\"string\"==typeof this.options.url&&null!=this.options.url&&\"\"!==this.options.url.trim()}};new class{constructor(e={}){this.options={form_selector:\"form[data-file-choose-form]\",file_drop_selector:\".pure-file-drop\",file_drop_area_text:\"Arraste os arquivos ou clique aqui\",upload_url:null,async_request:!0,param_name:\"file\",form_ajax:!0,upload_on_drop:!1,select_by_click:!0,onSuccess:function(e){},onError:function(e){},onEnd:function(e){}},this._files_selected=[],this._overrideOptionsProperties(e),this._build()}_build(){this._form=document.querySelector(this.options.form_selector);let e=document.createElement(\"span\");e.innerText=this.options.file_drop_area_text,this._files_drop_area=document.querySelector(this.options.file_drop_selector),this._drop_zone_area=document.createElement(\"div\"),this._drop_zone_area.className=\"drop-zone\",this._drop_zone_area.appendChild(e),this.options.select_by_click&&(this._file_input=document.createElement(\"input\"),this._file_input.setAttribute(\"type\",\"file\"),this._file_input.setAttribute(\"multiple\",!0),this._drop_zone_area.appendChild(this._file_input)),this._files_drop_area.appendChild(this._drop_zone_area),this._form&&(this._form.enctype=\"multipart/form-data\",this.options.upload_url&&(this._form.action=this.options.upload_url),this._initializeEvents())}_overrideOptionsProperties(e){for(var t in e)this.options.hasOwnProperty(t)&&(this.options[t]=e[t])}_initializeEvents(){if(this._form.addEventListener(\"submit\",e=>this._doRequest(e)),this._files_drop_area.addEventListener(\"dragenter\",e=>{this._drop_zone_area.className+=\" dragging\"}),this._files_drop_area.addEventListener(\"dragover\",e=>e.preventDefault()),this._files_drop_area.addEventListener(\"drop\",e=>{e.preventDefault(),this._handleFiles(e.dataTransfer.files,e)}),this._files_drop_area.addEventListener(\"dragleave\",e=>{this._drop_zone_area.className=this._drop_zone_area.className.replace(/\\s*.(dragging)/g,\"\")}),this._files_drop_area.addEventListener(\"click\",e=>{e.target.dataset.removeFileDrop&&this._removeFile(e)}),this.options.select_by_click){let e=this;this._files_drop_area.addEventListener(\"click\",t=>{t.target===e._drop_zone_area&&e._file_input.click()}),this._file_input.addEventListener(\"change\",e=>{this._handleFiles(e.target.files,e),e.target.value=\"\"})}}_removeFile(e){let t=this._index(e.target.parentNode);this._files_selected.splice(t,1),this._files_dropped_area.removeChild(e.target.parentNode),0==this._files_dropped_area.children.length&&(this._files_drop_area.removeChild(this._files_dropped_area),this._files_dropped_area=null)}_index(e){let t=0;for(;e;)e=e.previousSibling,t++;return--t}_handleFiles(e,t){t.preventDefault();for(let t=0;t<e.length;t++){let o=e[t],r=document.createElement(\"span\");r.innerText=o.name;let s=document.createElement(\"button\");s.setAttribute(\"type\",\"button\"),s.className=\"btn btn-danger\",s.innerText=\"Remover\",s.dataset.removeFileDrop=\"remove-file-drop\";let i=document.createElement(\"div\");i.className=\"single-file\",i.appendChild(r),i.appendChild(s),this._files_dropped_area||(this._files_dropped_area=document.createElement(\"div\"),this._files_dropped_area.className=\"files-dropped\",this._files_drop_area.appendChild(this._files_dropped_area)),this._files_dropped_area.appendChild(i),this._files_selected.push(o)}}_doRequest(e){console.log(\"Requesting...\"),e.preventDefault();var t=this._getFormData();$.ajax({url:this.options.upload_url,type:\"POST\",async:this.options.async_request,processData:!1,contentType:!1,data:t,error:function(e){this.options.onError(e)},complete:function(e){this.options.onEnd(e)}}).done(function(e){this.options.onSuccess(e)})}_getFormData(){let e=this,t=new FormData(e._form);return e._files_selected.forEach(function(o){t.append(e.options.param_name,o)}),t}request(e={}){var t=this;if(t._overrideOptionsProperties(e),t._isOptionsValid()){let e=new XMLHttpRequest;e.open(t.options.method,t.options.url,t.options.async),e.onreadystatechange=function(){let o=this.status.toString();if(4==this.readyState){let r=this.response;o.startsWith(\"2\")?(\"json\"===t.options.responseType&&(r=JSON.parse(r)),t.options.onSuccess(r,this)):(o.startsWith(\"4\")||o.startsWith(\"5\"))&&(console.error(o,\" - \",this.statusText),t.options.onError(r,this)),t.options.onComplete(r,this),console.log(e.getAllResponseHeaders())}},\"POST\"===t.options.method&&\"string\"==typeof t.options.data&&e.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),this._setRequestHeaders(e),this.options.beforeSend(e),e.send(t.options.data)}else console.error(\"ERROR - Specify the options correctly\")}}({form_selector:\"#myForm\",upload_url:\"http://localhost:3000/servicos\"})}]);","extractedComments":[]}